<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: html_head">
</head>
<body>
<div class="container-fluid my-5">
    <div th:replace="fragments :: menu">
    </div>

    <div class="container my-5 form border border-5 shadow-lg p-3 mb-5 bg-body">
        <div class="my-5">
            <h1 class="text-center"> Create a new user</h1>
        </div>
        <!-- Form -->
        <form th:action="@{/users/save}" method="post" th:object="${user}" class="w-75 mx-auto">
            <div class="form-group row my-3 rounded-3">
                <label class="col-sm-3 col-form-label">Email</label>
                <div class="col-sm-9">
                    <input type="email" class="form-control" th:field="*{email}" required minlength="8" maxlength="128"/>
                </div>
            </div>
            <div class="form-group row my-3 rounded-3">
                <label class="col-sm-3 col-form-label">First name</label>
                <div class="col-sm-9">
                    <input type="text" class="form-control" th:field="*{firstname}" required minlength="2" maxlength="45"/>
                </div>
            </div>
            <div class="form-group row my-3 rounded-3">
                <label class="col-sm-3 col-form-label">Last name</label>
                <div class="col-sm-9">
                    <input type="text" class="form-control" th:field="*{lastname}" required minlength="2" maxlength="45"/>
                </div>
            </div>
            <div class="form-group row my-3 rounded-3">
                <label class="col-sm-3 col-form-label">Password</label>
                <div class="col-sm-9">
                    <input type="text" class="form-control" th:field="*{password}" required minlength="2" maxlength="45"/>
                </div>
            </div>
            <div class="form-group row my-3 rounded-3">
                <label class="col-sm-3 col-form-label">Roles</label>
                <div class="col-sm-9">
                    <th:block th:each="role : ${roles}">
                        <input type="checkbox" th:field="*{roles}" th:text="${role.name}" th:value="${role.id}" class="me-3"/>
                        : <small class="text-pink ms-3"> [[${role.description}]] </small>
                        <br/>
                    </th:block>
                </div>
            </div>
            <div class="form-group row my-3 rounded-3">
                <label class="col-sm-3 col-form-label">Enabled</label>
                <div class="col-sm-9">
                    <input type="checkbox" class="mt-3" th:field="*{enable}"/>
                </div>
            </div>
            <div class="text-center my-3">
                <input type="submit" value="Save" class="btn btn-lg button px-3" />
                <input type="button" value="Cancel" class="btn btn-lg button-alert bg-secondary px-3 ms-3" id="buttonCancel"/>
            </div>
        </form>
    </div>
    <div th:replace="fragments :: footer">
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $("#buttonCancel").on("click", function() {
            window.location = "[[@{/users}]]";
        });
    });
</script>
</body>
</html>